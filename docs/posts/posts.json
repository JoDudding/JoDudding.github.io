[
  {
    "path": "posts/2020-12-13-testing-a-ggplot-theme/",
    "title": "Testing a ggplot theme",
    "description": "Playing with options to decide on the theme I want to use.",
    "author": [
      {
        "name": "Jo Dudding",
        "url": {}
      }
    ],
    "date": "2020-12-13",
    "categories": [],
    "contents": "\r\nFirst we’ll start with a chart using the default theme.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(ggtext)\r\n\r\np_bar <- ggplot(mtcars, aes(drat)) +\r\n  geom_histogram(bins = 5) +\r\n  labs(\r\n    x = 'Title of x',\r\n    y = 'Title of y',\r\n    title = 'Overall Title',\r\n    subtitle = 'This is the subtitle',\r\n    caption = 'May need a caption as well'\r\n  )\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nI tried the different base themes and this was the closest to what I wanted.\r\n\r\n\r\np_bar + theme_bw()\r\n\r\n\r\n\r\n\r\nLet’s try changing the font\r\n\r\n\r\nlibrary(showtext)\r\nfont_add_google(\"Fira Sans\", \"Fira Sans\")\r\nshowtext_auto()\r\n\r\np_bar <- p_bar + \r\n  theme_bw() %+replace%\r\n  theme(\r\n    # default font\r\n    text = element_text(family=\"Fira Sans\", size = 15)\r\n  )\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nAdd some other layout changes to:\r\nMove the title and caption to align with the plot not the panel\r\nPut some extra room between the plot and the title/caption\r\nMake the text fields use element_markdown\r\nRight align the axis titles\r\nRemove the panel border\r\nAdd in axis lines the same colour as the gridlines and change the tick marks to use the same colour.\r\n\r\n\r\np_bar <- p_bar +\r\n  theme(\r\n    # align title and caption to the plot not the panel\r\n    plot.title.position = 'plot',\r\n    plot.caption.position = 'plot',\r\n    # change the title and caption to markdown and move them futher from the plot\r\n    plot.title = element_markdown(\r\n      hjust = 0, \r\n      margin = margin(c(0, 0, 10, 0))\r\n    ),\r\n    plot.subtitle = element_markdown(\r\n      hjust = 0, \r\n      margin = margin(c(0, 0, 15, 0))\r\n    ),\r\n    plot.caption = element_markdown(\r\n      hjust = 1, \r\n      margin = margin(c(10, 0, 0, 0))\r\n    ),\r\n    # move axis titles to the left/top and change them to markdown\r\n    axis.title = element_markdown(hjust = 1),\r\n    # allow the axis values to the markdown as well\r\n    axis.text = element_markdown(),\r\n    # remove the panel border\r\n    panel.border = element_blank(),\r\n    # put in the axis lines with a slightly thicker line than the gridlines\r\n    axis.line = element_line(colour = \"grey92\", size = rel(1.5)),\r\n    # make the tickmarks the same colour\r\n    axis.ticks = element_line(colour = \"grey92\")\r\n  )\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nLet’s see what it looks like with facets.\r\n\r\n\r\np_bar <- p_bar + \r\n  facet_wrap(~as_factor(carb))\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nI’ve left aligned the text in the facet and removed the box and border.\r\n\r\n\r\np_bar <- p_bar + \r\n  theme(\r\n    # facet strip text left aligned with extra space above\r\n    strip.text = element_markdown(hjust = 0, margin = margin(c(10, 0, 0, 0))),\r\n    # clear colour and fill for strip\r\n    strip.background = element_rect(colour = NA, fill = NA)\r\n  )\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nTime to add some colour.\r\n\r\n\r\nadd_colour <- \"#5F187FFF\"\r\n\r\np_bar <- p_bar +\r\n  theme(\r\n    # colour the title\r\n    plot.title = element_markdown(\r\n      hjust = 0, margin = margin(c(0, 0, 10, 0)), colour = add_colour\r\n    ),\r\n    # colour the strip text\r\n    strip.text = element_markdown(\r\n      hjust = 0, margin = margin(c(10, 0, 0, 0)), colour = add_colour\r\n    )\r\n  )\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nNearly there. I think I’ll made the gridlines dotted.\r\n\r\n\r\nadd_colour <- \"#5F187FFF\"\r\n\r\np_bar <- p_bar +\r\n  theme(\r\n    # dotted gridlines\r\n    panel.grid = element_line(linetype = 'dotted')\r\n  )\r\n\r\np_bar\r\n\r\n\r\n\r\n\r\nOkay. Let’s save this as a theme with options to change out the highlight colour, font family and font size\r\n\r\n\r\ntheme_jo <- function(\r\n  add_colour = \"#5F187FFF\",\r\n  base_family = \"Fira Sans\",\r\n  base_size = 15,\r\n  x_grid_colour = \"grey92\",\r\n  y_grid_colour = \"grey92\",\r\n  ...\r\n  ) {\r\n  \r\n  theme_bw(...) %+replace%\r\n  theme(\r\n    # default font\r\n    text = element_text(family = base_family, size = base_size),\r\n    # align title and caption to the plot not the panel\r\n    plot.title.position = 'plot',\r\n    plot.caption.position = 'plot',\r\n    # change the title and caption to markdown and move them futher from the plot\r\n    # change the title and caption to markdown and move them futher from the plot\r\n    plot.title = element_markdown(\r\n      hjust = 0, \r\n      margin = margin(c(0, 0, 10, 0)),\r\n      colour = add_colour\r\n    ),\r\n    plot.subtitle = element_markdown(\r\n      hjust = 0, \r\n      margin = margin(c(0, 0, 15, 0))\r\n    ),\r\n    plot.caption = element_markdown(\r\n      hjust = 1, \r\n      margin = margin(c(10, 0, 0, 0))\r\n    ),\r\n    # move axis titles to the left/top and change them to markdown\r\n    axis.title = element_markdown(hjust = 1),\r\n    # allow the axis values to the markdown as well\r\n    axis.text = element_markdown(),\r\n    # remove the panel border\r\n    panel.border = element_blank(),\r\n    # put in the axis lines with a slightly thicker line than the gridlines\r\n    axis.line = element_line(colour = \"grey92\", size = rel(1.5)),\r\n    # make the tickmarks the same colour\r\n    axis.ticks = element_line(colour = \"grey92\"),\r\n    # facet strip text left aligned with extra space above\r\n    strip.text = element_markdown(\r\n      hjust = 0, margin = margin(c(10, 0, 0, 0)), colour = add_colour\r\n    ),\r\n    # clear colour and fill for strip\r\n    strip.background = element_rect(colour = NA, fill = NA),\r\n    # dotted gridlines\r\n    panel.grid = element_line(linetype = 'dotted'),\r\n    # ability to use a different colour for the gridlines\r\n    panel.grid.major.x = element_line(colour = x_grid_colour),\r\n    panel.grid.major.y = element_line(colour = y_grid_colour)\r\n  )\r\n}\r\n\r\n\r\n\r\nAnd apply it to a new chart with a markdown change in the title.\r\n\r\n\r\nggplot(diamonds, aes(x=carat, y=price, color=clarity)) + \r\n  geom_point() +\r\n  labs(\r\n    title = '*Price* of **diamonds** for differing *carats*',\r\n    subtitle = 'The *clarity* is also a driver of *price*',\r\n    caption = 'Source: unknown'\r\n  ) +\r\n  theme_jo()\r\n\r\n\r\n\r\n\r\nAnd using different parameters.\r\n\r\n\r\nggplot(diamonds, aes(x=clarity, y=price)) + \r\n  geom_boxplot() +\r\n  labs(\r\n    title = '*Price* of **diamonds** for differing *carats*',\r\n    subtitle = 'This time its a boxplot',\r\n    caption = 'Source: unknown'\r\n  ) +\r\n  theme_jo(\r\n    add_colour = '#FFA500', \r\n    base_family = 'sans',\r\n    base_size = 11,\r\n    y_grid_colour = '#FFA500',\r\n    x_grid_colour = 'white')\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2020-12-13-testing-a-ggplot-theme/testing-a-ggplot-theme_files/figure-html5/unnamed-chunk-10-1.png",
    "last_modified": "2020-12-13T21:35:20+13:00",
    "input_file": {},
    "preview_width": 1436,
    "preview_height": 887
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Random Analysis Generator",
    "description": "Welcome to Random Analysis Generator, where I share what I've been learning\nabout R.",
    "author": [
      {
        "name": "Jo Dudding",
        "url": "https://github.com/JoDudding/blog"
      }
    ],
    "date": "2020-12-12",
    "categories": [],
    "contents": "\r\nLearning how to use the distill package is the first part.\r\nNeed to work out how to get the logo in to the nav bar. And figure out why the font size in charts is smaller with my theme.\r\nSome ideas for posts are:\r\nfactor levels wrap, substring, etc\r\nggtext colour word helper\r\nscale pct etc\r\nggpie\r\nstr_wrap_html\r\nnz hexmap\r\nxmas tree\r\ntheme testing\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2020-12-13T21:39:45+13:00",
    "input_file": {}
  }
]
